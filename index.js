const WebSocket = require('ws')
let client

function startClient() {
  let count = 0
  client = new WebSocket('ws://localhost:4000/app', {
    headers: {
      token: '3e874b6aa7ad79fda6a97b2bd6cf67c20f7db0660f76ba4636cf39de273677fe0b5f3406805b9fc27d5b9253c605d85df595fbac20df718b055da06b76509c9dfdb70f6cc14577fd1f9588e9c3ed1dc5301e35811246c8a1f16110a2e305448d3c304d2a4ac9ae4de3d8e30906252870d14743a3182539646ef4e583a297617a9117e1eeb93d071e2fd61a1e9487f56ea014de23e13c8bf74e10d26d2ba4f48e127383dc14907bcb03cbd3421198c29d19578c163c8a1474a6982f4b70d67912a44623ea99d8fbdfb8699c8ba4b78c01cc2a804e5d1f2bef907a921f34003dff2710e5b3cdf3f99db5c0f40838ee03b8f266473d5be9cfc66ef5b11ea13c9ce535f155e9a9484aa5522b0331bf2ab63193a94b952c1af22554a7f8018a25b4400fb8b29fad2220c8c7e2f826644701c0cc577e3cba67ef8d7e021b7226e07728f01fa25e0260ef6d294506a0c5307fcde0285cb3fc9dccd549fd36c46992303c8d0a65f829e06097db45d43b805dc1f1fce037a874f98b98750dd4793a6e42acfb7b6ea71deb96b4ef9634f03919870cb7774a6b146725d6738aeacec4f05e65ada02fc350517f06a19f4c661fad53d13459ef38ea3e9d5438d5a9a10b21b8aa83903dabdd2ea27c64ef37727adab0b2358beb1b7739e83f01b23fd32a78ed4d7431637a48636182369e102963143fc36b0885fde2d1428067978e8089342d6280facc8e18730a13e63847860f2f1e7573b36ecb6174e2723d354638de56a28d88dafd9a628ce32a3cd8ce2978a460f48a0d503de979f8f921b69858425b1c8c8127248720cb0a9b897fc9f673bd42a1'
    }
  })

  client.on('open', () => {
    console.log('Connected.')
  })

  client.on('ping', () => {
    console.log(`PING received.`)
    count += 1
    if (count < 5) {
      client.pong(() => {
        console.log(`PONG sent.`)
      })      
    }
  })
}

startClient()